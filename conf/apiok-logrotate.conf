# APIOK 日志轮转配置
# 日志路径: /opt/apiok/apiok/logs
# 使用方法：
# 1. 将配置文件复制到 /etc/logrotate.d/apiok
#    sudo cp conf/apiok-logrotate.conf /etc/logrotate.d/apiok
# 2. 测试配置：sudo logrotate -d /etc/logrotate.d/apiok
# 3. 手动执行：sudo logrotate -f /etc/logrotate.d/apiok
# 或者直接运行安装脚本：sudo ./scripts/install-logrotate.sh

/opt/apiok/apiok/logs/access.log
/opt/apiok/apiok/logs/error.log {
    daily
    rotate 3
    missingok
    notifempty
    compress
    delaycompress
    dateext
    dateformat -%Y%m%d
    sharedscripts
    postrotate
        if [ -f /opt/apiok/apiok/logs/nginx.pid ]; then
            kill -USR1 `cat /opt/apiok/apiok/logs/nginx.pid`
        fi
    endscript
}

